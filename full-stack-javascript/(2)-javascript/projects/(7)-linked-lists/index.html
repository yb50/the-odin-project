<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  <script>
    class Node {
      constructor(value = null, nextNode = null) {
        this.value = value;
        this.nextNode = nextNode;
      }
    }

    class LinkedList {
      constructor() {
        this.headNode = null;
        this.length = 0;
      }

      append(value) {
        const newNode = new Node(value);

        if (this.headNode === null) {
          this.headNode = newNode;
        } else {
          let current = this.headNode;
          while (current.nextNode !== null) {
            current = current.nextNode;
          }
          current.nextNode = newNode;
        }

        this.length++;
      }

      prepend(value) {
        const newNode = new Node(value, this.headNode);
        this.headNode = newNode;
        this.length++;
      }

      size() {
        return this.length;
      }

      head() {
        return this.headNode;
      }

      tail() {
        if (this.headNode === null) return null;

        let current = this.headNode;
        while (current.nextNode !== null) {
          current = current.nextNode;
        }
        return current;
      }

      at(index) {
        if (index < 0 || index >= this.length) return null;

        let current = this.headNode;
        let i = 0;
        while (i < index) {
          current = current.nextNode;
          i++;
        }
        return current;
      }

      pop() {
        if (this.headNode === null) return null;

        if (this.length === 1) {
          const removed = this.headNode;
          this.headNode = null;
          this.length = 0;
          return removed;
        }

        let prev = this.headNode;
        while (prev.nextNode !== null && prev.nextNode.nextNode !== null) {
          prev = prev.nextNode;
        }

        const removed = prev.nextNode;
        prev.nextNode = null;
        this.length--;
        return removed;
      }

      contains(value) {
        let current = this.headNode;
        while (current !== null) {
          if (current.value === value) return true;
          current = current.nextNode;
        }
        return false;
      }

      find(value) {
        let current = this.headNode;
        let index = 0;
        while (current !== null) {
          if (current.value === value) return index;
          current = current.nextNode;
          index++;
        }
        return null;
      }

      toString() {
        let result = "";
        let current = this.headNode;

        while (current !== null) {
          result += `( ${String(current.value)} ) -> `;
          current = current.nextNode;
        }

        result += "null";
        return result;
      }

      insertAt(value, index) {
        if (index < 0 || index > this.length) return false;

        if (index === 0) {
          this.prepend(value);
          return true;
        }

        if (index === this.length) {
          this.append(value);
          return true;
        }

        const prev = this.at(index - 1);
        const newNode = new Node(value);

        newNode.nextNode = prev.nextNode;
        prev.nextNode = newNode;

        this.length++;
        return true;
      }

      removeAt(index) {
        if (index < 0 || index >= this.length) return null;

        if (index === 0) {
          const removed = this.headNode;
          this.headNode = this.headNode.nextNode;
          this.length--;
          return removed;
        }

        const prev = this.at(index - 1);
        const removed = prev.nextNode;
        prev.nextNode = removed.nextNode;
        this.length--;
        return removed;
      }
    }

    // ----- Tests -----

    const list = new LinkedList();

    list.append(10);
    list.append(20);
    list.prepend(5);
    console.log("size:", list.size());
    console.log("head:", list.head());
    console.log("tail:", list.tail());
    console.log("at(1):", list.at(1));
    console.log("contains(10):", list.contains(10));
    console.log("find(20):", list.find(20));
    console.log(list.toString());

    list.insertAt(15, 2);
    console.log(list.toString());

    list.removeAt(1);
    console.log(list.toString());

    const popped = list.pop();
    console.log("popped:", popped);
    console.log(list.toString());
  </script>
</body>
</html>